#                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
#                â–ˆâ”€â”€â”€â”€â–ˆâ–ˆâ”€â”€â”€â”€â–ˆâ”€â”€â”€â”€â–ˆâ”€â”€â”€â”€â–ˆâ”€â”€â”€â–ˆâ”€â”€â”€â”€â–ˆâ”€â”€â”€â”€â–ˆâ”€â”€â”€â”€â–ˆ
#                â–ˆâ”€â–ˆâ–ˆâ”€â”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆ
#                â–ˆâ”€â–ˆâ–ˆâ”€â”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ”€â”€â”€â”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ”€â”€â”€â”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆ
#                â–ˆâ”€â–ˆâ–ˆâ”€â”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ”€â–ˆâ”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â–ˆ
#                â–ˆâ”€â”€â”€â”€â–ˆâ–ˆâ”€â”€â”€â”€â–ˆâ”€â–ˆâ”€â–ˆâ–ˆâ”€â”€â”€â”€â–ˆâ–ˆâ”€â–ˆâ–ˆâ”€â”€â”€â”€â–ˆâ”€â–ˆâ”€â–ˆâ–ˆâ”€â”€â”€â”€â–ˆ
#                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
#
#
#                     Copyright 2022 t.me/Dorotoro
#             https://www.gnu.org/licenses/agpl-3.0.html
#
# meta banner: https://raw.githubusercontent.com/dorotorothequickend/DorotoroModules/main/banners/Dorotoro01code.png
# meta developer: @DorotoroMods

from ..  import loader, utils
# https://clck.ru/32dhcu (StackOverflow)

@loader.tds
class tocodedecodemod(loader.Module):
    """Ğ’Ğ°Ñˆ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑˆĞ¸Ñ„Ñ€Ğ°Ñ‚Ğ¾Ñ€ Ğ² Ğ´Ğ²Ğ¾Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´."""
    strings = {"name": "01code"}


    @loader.command()
    async def codeit(self, message):
        "<Ñ‚ĞµĞºÑÑ‚, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ·Ğ°ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ> - ÑˆĞ¸Ñ„Ñ€ÑƒĞµÑ‚ Ğ²Ğ°Ñˆ Ñ‚ĞµĞºÑÑ‚ Ğ² Ğ´Ğ²Ğ¾Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´."
        args = utils.get_args_raw(message)
        def to_bits(args, encoding='utf-8', errors='surrogatepass'):
            bits = bin(int.from_bytes(args.encode(encoding, errors), 'big'))[2:]
            return bits.zfill(8 * ((len(bits) + 7) // 8))
        result = to_bits(args)
        await utils.answer(message, f"<emoji document_id=4985930888572306287>ğŸ–¥</emoji> <b>Ğ¢ĞµĞºÑÑ‚ Ğ·Ğ°ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½:</b>\n<code>{result}</code>")

    @loader.command()
    async def decode(self, message):
        "<ĞºĞ¾Ğ´, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ´ĞµÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ> - Ğ´ĞµÑˆĞ¸Ñ„Ñ€ÑƒĞµÑ‚ Ğ´Ğ²Ğ¾Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´."
        args = utils.get_args_raw(message)
        if not args:
            await utils.answer(message, "<emoji document_id=4985545282113503960>ğŸ–¥</emoji> <b>Ğ§Ñ‚Ğ¾ Ğ´ĞµĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ¾?</b>")
            return
        def from_bits(bits, encoding='utf-8', errors='surrogatepass'):
            n = int(bits, 2)
            return n.to_bytes((n.bit_length() + 7) // 8, 'big').decode(encoding, errors) or '\0'
        result = from_bits(args)
        await utils.answer(message, f"<emoji document_id=4985930888572306287>ğŸ–¥</emoji> <b>Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ´ĞµÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²ĞºĞ¸:</b>\n<code>{result}</code>")
